{% extends 'base.html' %} {% block head %}
<title>{{ card.title }} - CLNICALC</title>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/slug.css') }}"
/>
{% endblock %} {% block content %}
<!-- Navigation bar -->
<nav class="nav-bar">
  <ul>
    <li>
      <a href="/"
        ><img
          class="logo"
          src="{{ url_for('static', filename='images/logo.svg') }}"
          alt="Home/logo"
      /></a>
    </li>
    <div class="nav-links">
      <ul>
        <li><a href="">Recent</a></li>
        <li><a href="">Categories</a></li>
        <li><a href="">Contact</a></li>
        <li>
          <a href=""
            ><img
              class="mode"
              src="{{ url_for('static', filename='images/dark.svg') }}"
              alt="mode"
          /></a>
        </li>
      </ul>
    </div>
  </ul>
</nav>

<section id="card-detail">
  <!-- Page Header -->
  <div class="page-header">
    <h2>{{ card.title }}</h2>
    <p>{{ card.description }}</p>
  </div>

  <!-- Calculations Section -->
  <h3>Available Calculations</h3>
  <div class="calculation-cards">
    {% for calculation in card.calculations %}
    <div
      class="calculation-card"
      data-bs-toggle="modal"
      data-bs-target="#calculationModal-{{ loop.index }}"
    >
      <div class="card-body">
        <div class="card-content">
          <h5 class="card-title">{{ calculation.name }}</h5>
          <p class="card-text">{{ calculation.description }}</p>
        </div>
        <div class="card-footer">
          <span class="card-unit">{{ calculation.result_unit }}</span>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Back Button -->
  <a href="{{ url_for('index') }}" class="back-button">Back to Home</a>
</section>

<footer>
  <div class="footer-container">
    <div class="footer-section">
      <p>CLNICALC is a tool for nursing informatics calculations.</p>
      <p>All calculations should be confirmed by healthcare professionals.</p>
      <p>This tool does not provide medical advice.</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>
      &copy; <span id="current-year">2025</span> CLNICALC. All rights reserved.
    </p>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Update current year
    const yearSpan = document.getElementById('current-year');
    if (yearSpan) {
      const currentYear = new Date().getFullYear();
      yearSpan.textContent = currentYear;
    }

    // Handle form submissions
    const forms = document.querySelectorAll('form');
    forms.forEach((form) => {
      form.addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(form);
        fetch(form.action, {
          method: 'POST',
          body: formData,
        })
          .then((response) => response.json())
          .then((data) => {
            const resultDiv = document.getElementById(
              'result-' + form.id.split('-')[1]
            );
            if (resultDiv) {
              resultDiv.textContent = 'Result: ' + data.result;
            }
          })
          .catch((error) => console.error('Error:', error));
      });
    });

    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start',
          });
        }
      });
    });
  });
</script>
{% endblock %}
